{
  "info": {
    "name": "üìä Predictions Management - COMPLETE COLLECTION",
    "description": "Complete prediction system: Annual, Quarterly, and Bulk Upload operations",
    "version": "1.0.0 - FINAL",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000",
      "type": "string",
      "description": "üåê Base URL for the API server"
    },
    {
      "key": "token",
      "value": "",
      "type": "string",
      "description": "üîë JWT access token for authentication"
    },
    {
      "key": "predictionId",
      "value": "",
      "type": "string",
      "description": "üìä Current prediction ID"
    },
    {
      "key": "jobId",
      "value": "",
      "type": "string",
      "description": "‚öôÔ∏è Current background job ID"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "üìà Annual Predictions (5 endpoints)",
      "description": "Annual prediction operations: create, get all, update, delete",
      "item": [
        {
          "name": "Create Annual Prediction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.prediction && response.prediction.id) {",
                  "        pm.collectionVariables.set('predictionId', response.prediction.id);",
                  "        console.log('üìä Annual Prediction ID set:', response.prediction.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"company_symbol\": \"RELIANCE\",\n    \"company_name\": \"Reliance Industries Limited\",\n    \"market_cap\": 150000.5,\n    \"sector\": \"Oil & Gas\",\n    \"reporting_year\": \"2024\",\n    \"reporting_quarter\": \"Q1\",\n    \"long_term_debt_to_total_capital\": 25.5,\n    \"total_debt_to_ebitda\": 2.1,\n    \"net_income_margin\": 12.3,\n    \"ebit_to_interest_expense\": 8.7,\n    \"return_on_assets\": 9.2\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/annual",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "annual"
              ]
            },
            "description": "**üìà Create Annual Prediction** - Create annual default rate prediction with 5 financial ratios\n\nüîí **Authorization:** org_member or higher\n\nüìã **Request Body Schema:**\n```json\n{\n  \"company_symbol\": \"string\",     // Stock symbol (required)\n  \"company_name\": \"string\",       // Company name (required)\n  \"market_cap\": number,            // Market cap in millions (required)\n  \"sector\": \"string\",             // Business sector (required)\n  \"reporting_year\": \"string\",     // Year (YYYY format) (required)\n  \"reporting_quarter\": \"string\",  // Optional: Q1, Q2, Q3, Q4\n  \"long_term_debt_to_total_capital\": number, // 0-100% (required)\n  \"total_debt_to_ebitda\": number,            // ‚â•0 (required)\n  \"net_income_margin\": number,               // -100 to 100% (required)\n  \"ebit_to_interest_expense\": number,        // ‚â•0 (required)\n  \"return_on_assets\": number                 // -100 to 100% (required)\n}\n```\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"success\": true,\n  \"prediction\": {\n    \"id\": \"uuid\",\n    \"company_symbol\": \"RELIANCE\",\n    \"company_name\": \"Reliance Industries Limited\",\n    \"reporting_year\": \"2024\",\n    \"reporting_quarter\": \"Q1\",\n    \"prediction_type\": \"annual\",\n    \"default_probability\": 0.125,\n    \"risk_score\": 2.5,\n    \"risk_category\": \"Low\",\n    \"created_at\": \"2024-01-01T00:00:00Z\"\n  },\n  \"company\": {\n    \"id\": \"uuid\",\n    \"symbol\": \"RELIANCE\",\n    \"name\": \"Reliance Industries Limited\",\n    \"sector\": \"Oil & Gas\",\n    \"market_cap\": 150000500000\n  }\n}\n```\n\n‚ùå **Error Responses:**\n- 400: Invalid financial ratios or missing required fields\n- 403: Insufficient permissions\n- 422: Validation errors"
          }
        },
        {
          "name": "Get All Annual Predictions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/annual?page=1&size=10&company_symbol=RELIANCE&reporting_year=2024",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "annual"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "10"
                },
                {
                  "key": "company_symbol",
                  "value": "RELIANCE"
                },
                {
                  "key": "reporting_year",
                  "value": "2024"
                }
              ]
            },
            "description": "**üìã Get All Annual Predictions** - Paginated list with filtering\n\nüîí **Authorization:** org_member or higher\n\nüìã **Query Parameters:**\n- `page` (integer): Page number (default: 1)\n- `size` (integer): Page size (default: 10)\n- `company_symbol` (string): Filter by company symbol\n- `reporting_year` (string): Filter by year (YYYY)\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"predictions\": [\n    {\n      \"id\": \"uuid\",\n      \"company_symbol\": \"RELIANCE\",\n      \"company_name\": \"Reliance Industries Limited\",\n      \"reporting_year\": \"2024\",\n      \"reporting_quarter\": \"Q1\",\n      \"default_probability\": 0.125,\n      \"risk_score\": 2.5,\n      \"risk_category\": \"Low\",\n      \"created_at\": \"2024-01-01T00:00:00Z\",\n      \"financial_ratios\": {\n        \"long_term_debt_to_total_capital\": 25.5,\n        \"total_debt_to_ebitda\": 2.1,\n        \"net_income_margin\": 12.3,\n        \"ebit_to_interest_expense\": 8.7,\n        \"return_on_assets\": 9.2\n      }\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"size\": 10,\n    \"total\": 25,\n    \"pages\": 3\n  },\n  \"filters_applied\": {\n    \"company_symbol\": \"RELIANCE\",\n    \"reporting_year\": \"2024\"\n  }\n}\n```"
          }
        },
        {
          "name": "Update Annual Prediction",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"long_term_debt_to_total_capital\": 27.8,\n    \"total_debt_to_ebitda\": 2.3,\n    \"net_income_margin\": 13.1,\n    \"ebit_to_interest_expense\": 9.2,\n    \"return_on_assets\": 10.1,\n    \"reporting_quarter\": \"Q2\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/annual/{{predictionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "annual",
                "{{predictionId}}"
              ]
            },
            "description": "**‚úèÔ∏è Update Annual Prediction** - Update financial ratios and recalculate prediction\n\nüîí **Authorization:** org_member or higher (own predictions) or org_admin\n\nüìã **Request Body Schema:** (All fields optional)\n```json\n{\n  \"long_term_debt_to_total_capital\": number,\n  \"total_debt_to_ebitda\": number,\n  \"net_income_margin\": number,\n  \"ebit_to_interest_expense\": number,\n  \"return_on_assets\": number,\n  \"reporting_quarter\": \"string\"\n}\n```\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Annual prediction updated successfully\",\n  \"prediction\": {\n    \"id\": \"uuid\",\n    \"default_probability\": 0.142,\n    \"risk_score\": 2.8,\n    \"risk_category\": \"Low\",\n    \"updated_at\": \"2024-01-01T12:00:00Z\",\n    \"financial_ratios\": {\n      \"long_term_debt_to_total_capital\": 27.8,\n      \"total_debt_to_ebitda\": 2.3,\n      \"net_income_margin\": 13.1,\n      \"ebit_to_interest_expense\": 9.2,\n      \"return_on_assets\": 10.1\n    }\n  },\n  \"changes\": {\n    \"probability_change\": 0.017,\n    \"risk_score_change\": 0.3\n  }\n}\n```"
          }
        },
        {
          "name": "Delete Annual Prediction",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/annual/{{predictionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "annual",
                "{{predictionId}}"
              ]
            },
            "description": "**üóëÔ∏è Delete Annual Prediction** - Remove specific annual prediction\n\nüîí **Authorization:** org_admin or prediction owner\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Annual prediction deleted successfully\",\n  \"deleted_prediction_id\": \"uuid\",\n  \"company_symbol\": \"RELIANCE\",\n  \"reporting_year\": \"2024\"\n}\n```\n\n‚ùå **Error Responses:**\n- 403: Insufficient permissions\n- 404: Prediction not found"
          }
        },
        {
          "name": "Get Annual Prediction Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/annual/{{predictionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "annual",
                "{{predictionId}}"
              ]
            },
            "description": "**üìä Get Annual Prediction Details** - Detailed view of specific prediction\n\nüîí **Authorization:** org_member or higher\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"prediction\": {\n    \"id\": \"uuid\",\n    \"company_symbol\": \"RELIANCE\",\n    \"company_name\": \"Reliance Industries Limited\",\n    \"reporting_year\": \"2024\",\n    \"reporting_quarter\": \"Q1\",\n    \"prediction_type\": \"annual\",\n    \"default_probability\": 0.125,\n    \"risk_score\": 2.5,\n    \"risk_category\": \"Low\",\n    \"confidence_level\": 0.89,\n    \"model_version\": \"v2.1\",\n    \"created_at\": \"2024-01-01T00:00:00Z\",\n    \"updated_at\": \"2024-01-01T00:00:00Z\",\n    \"financial_ratios\": {\n      \"long_term_debt_to_total_capital\": 25.5,\n      \"total_debt_to_ebitda\": 2.1,\n      \"net_income_margin\": 12.3,\n      \"ebit_to_interest_expense\": 8.7,\n      \"return_on_assets\": 9.2\n    }\n  },\n  \"company\": {\n    \"id\": \"uuid\",\n    \"symbol\": \"RELIANCE\",\n    \"name\": \"Reliance Industries Limited\",\n    \"sector\": \"Oil & Gas\",\n    \"market_cap\": 150000500000\n  }\n}\n```"
          }
        }
      ]
    },
    {
      "name": "üìâ Quarterly Predictions (5 endpoints)",
      "description": "Quarterly prediction operations: create, get all, update, delete",
      "item": [
        {
          "name": "Create Quarterly Prediction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.prediction && response.prediction.id) {",
                  "        pm.collectionVariables.set('predictionId', response.prediction.id);",
                  "        console.log('üìâ Quarterly Prediction ID set:', response.prediction.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"company_symbol\": \"TCS\",\n    \"company_name\": \"Tata Consultancy Services\",\n    \"market_cap\": 120000.0,\n    \"sector\": \"Information Technology\",\n    \"reporting_year\": \"2024\",\n    \"reporting_quarter\": \"Q1\",\n    \"total_debt_to_ebitda\": 1.5,\n    \"sga_margin\": 18.7,\n    \"long_term_debt_to_total_capital\": 15.2,\n    \"return_on_capital\": 22.8\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/quarterly",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "quarterly"
              ]
            },
            "description": "**üìâ Create Quarterly Prediction** - Create quarterly default rate prediction with 4 financial ratios\n\nüîí **Authorization:** org_member or higher\n\nüìã **Request Body Schema:**\n```json\n{\n  \"company_symbol\": \"string\",     // Stock symbol (required)\n  \"company_name\": \"string\",       // Company name (required)\n  \"market_cap\": number,            // Market cap in millions (required)\n  \"sector\": \"string\",             // Business sector (required)\n  \"reporting_year\": \"string\",     // Year (YYYY format) (required)\n  \"reporting_quarter\": \"string\",  // Q1, Q2, Q3, Q4 or 1, 2, 3, 4 (required)\n  \"total_debt_to_ebitda\": number,        // ‚â•0 (required)\n  \"sga_margin\": number,                  // -100 to 100% (required)\n  \"long_term_debt_to_total_capital\": number, // 0-100% (required)\n  \"return_on_capital\": number            // -100 to 100% (required)\n}\n```\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"success\": true,\n  \"prediction\": {\n    \"id\": \"uuid\",\n    \"company_symbol\": \"TCS\",\n    \"company_name\": \"Tata Consultancy Services\",\n    \"reporting_year\": \"2024\",\n    \"reporting_quarter\": \"Q1\",\n    \"prediction_type\": \"quarterly\",\n    \"default_probability\": 0.082,\n    \"risk_score\": 1.8,\n    \"risk_category\": \"Very Low\",\n    \"created_at\": \"2024-01-01T00:00:00Z\"\n  },\n  \"company\": {\n    \"id\": \"uuid\",\n    \"symbol\": \"TCS\",\n    \"name\": \"Tata Consultancy Services\",\n    \"sector\": \"Information Technology\",\n    \"market_cap\": 120000000000\n  }\n}\n```\n\n‚ùå **Error Responses:**\n- 400: Invalid financial ratios or missing required fields\n- 403: Insufficient permissions\n- 422: Validation errors"
          }
        },
        {
          "name": "Get All Quarterly Predictions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/quarterly?page=1&size=10&company_symbol=TCS&reporting_year=2024",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "quarterly"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "10"
                },
                {
                  "key": "company_symbol",
                  "value": "TCS"
                },
                {
                  "key": "reporting_year",
                  "value": "2024"
                }
              ]
            },
            "description": "**üìã Get All Quarterly Predictions** - Paginated list with filtering\n\nüîí **Authorization:** org_member or higher\n\nüìã **Query Parameters:**\n- `page` (integer): Page number (default: 1)\n- `size` (integer): Page size (default: 10)\n- `company_symbol` (string): Filter by company symbol\n- `reporting_year` (string): Filter by year (YYYY)\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"predictions\": [\n    {\n      \"id\": \"uuid\",\n      \"company_symbol\": \"TCS\",\n      \"company_name\": \"Tata Consultancy Services\",\n      \"reporting_year\": \"2024\",\n      \"reporting_quarter\": \"Q1\",\n      \"default_probability\": 0.082,\n      \"risk_score\": 1.8,\n      \"risk_category\": \"Very Low\",\n      \"created_at\": \"2024-01-01T00:00:00Z\",\n      \"financial_ratios\": {\n        \"total_debt_to_ebitda\": 1.5,\n        \"sga_margin\": 18.7,\n        \"long_term_debt_to_total_capital\": 15.2,\n        \"return_on_capital\": 22.8\n      }\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"size\": 10,\n    \"total\": 15,\n    \"pages\": 2\n  },\n  \"filters_applied\": {\n    \"company_symbol\": \"TCS\",\n    \"reporting_year\": \"2024\"\n  }\n}\n```"
          }
        },
        {
          "name": "Update Quarterly Prediction",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"total_debt_to_ebitda\": 1.7,\n    \"sga_margin\": 19.2,\n    \"long_term_debt_to_total_capital\": 14.8,\n    \"return_on_capital\": 24.1,\n    \"reporting_quarter\": \"Q2\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/quarterly/{{predictionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "quarterly",
                "{{predictionId}}"
              ]
            },
            "description": "**‚úèÔ∏è Update Quarterly Prediction** - Update financial ratios and recalculate prediction\n\nüîí **Authorization:** org_member or higher (own predictions) or org_admin\n\nüìã **Request Body Schema:** (All fields optional)\n```json\n{\n  \"total_debt_to_ebitda\": number,\n  \"sga_margin\": number,\n  \"long_term_debt_to_total_capital\": number,\n  \"return_on_capital\": number,\n  \"reporting_quarter\": \"string\"\n}\n```\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Quarterly prediction updated successfully\",\n  \"prediction\": {\n    \"id\": \"uuid\",\n    \"default_probability\": 0.075,\n    \"risk_score\": 1.6,\n    \"risk_category\": \"Very Low\",\n    \"updated_at\": \"2024-01-01T12:00:00Z\",\n    \"financial_ratios\": {\n      \"total_debt_to_ebitda\": 1.7,\n      \"sga_margin\": 19.2,\n      \"long_term_debt_to_total_capital\": 14.8,\n      \"return_on_capital\": 24.1\n    }\n  },\n  \"changes\": {\n    \"probability_change\": -0.007,\n    \"risk_score_change\": -0.2\n  }\n}\n```"
          }
        },
        {
          "name": "Delete Quarterly Prediction",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/quarterly/{{predictionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "quarterly",
                "{{predictionId}}"
              ]
            },
            "description": "**üóëÔ∏è Delete Quarterly Prediction** - Remove specific quarterly prediction\n\nüîí **Authorization:** org_admin or prediction owner\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Quarterly prediction deleted successfully\",\n  \"deleted_prediction_id\": \"uuid\",\n  \"company_symbol\": \"TCS\",\n  \"reporting_year\": \"2024\",\n  \"reporting_quarter\": \"Q1\"\n}\n```\n\n‚ùå **Error Responses:**\n- 403: Insufficient permissions\n- 404: Prediction not found"
          }
        },
        {
          "name": "Get Quarterly Prediction Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/quarterly/{{predictionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "quarterly",
                "{{predictionId}}"
              ]
            },
            "description": "**üìâ Get Quarterly Prediction Details** - Detailed view of specific prediction\n\nüîí **Authorization:** org_member or higher\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"prediction\": {\n    \"id\": \"uuid\",\n    \"company_symbol\": \"TCS\",\n    \"company_name\": \"Tata Consultancy Services\",\n    \"reporting_year\": \"2024\",\n    \"reporting_quarter\": \"Q1\",\n    \"prediction_type\": \"quarterly\",\n    \"default_probability\": 0.082,\n    \"risk_score\": 1.8,\n    \"risk_category\": \"Very Low\",\n    \"confidence_level\": 0.92,\n    \"model_version\": \"v1.8\",\n    \"created_at\": \"2024-01-01T00:00:00Z\",\n    \"updated_at\": \"2024-01-01T00:00:00Z\",\n    \"financial_ratios\": {\n      \"total_debt_to_ebitda\": 1.5,\n      \"sga_margin\": 18.7,\n      \"long_term_debt_to_total_capital\": 15.2,\n      \"return_on_capital\": 22.8\n    }\n  },\n  \"company\": {\n    \"id\": \"uuid\",\n    \"symbol\": \"TCS\",\n    \"name\": \"Tata Consultancy Services\",\n    \"sector\": \"Information Technology\",\n    \"market_cap\": 120000000000\n  }\n}\n```"
          }
        }
      ]
    },
    {
      "name": "üì§ Bulk Upload Operations (4 endpoints)",
      "description": "Bulk upload operations: annual async upload, quarterly async upload, job status, job results",
      "item": [
        {
          "name": "Annual Bulk Upload (Async)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 202) {",
                  "    const response = pm.response.json();",
                  "    if (response.job_id) {",
                  "        pm.collectionVariables.set('jobId', response.job_id);",
                  "        console.log('‚öôÔ∏è Annual Bulk Job ID set:', response.job_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/annual_predictions.xlsx",
                  "description": "Excel file with annual predictions data"
                },
                {
                  "key": "reporting_year",
                  "value": "2024",
                  "type": "text",
                  "description": "Year for all predictions in the file"
                },
                {
                  "key": "overwrite_existing",
                  "value": "false",
                  "type": "text",
                  "description": "Whether to overwrite existing predictions"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/annual/bulk-upload-async",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "annual",
                "bulk-upload-async"
              ]
            },
            "description": "**üì§ Annual Bulk Upload (Async)** - Upload Excel file for batch annual predictions processing\n\nüîí **Authorization:** org_admin or higher\n\nüìã **Form Data:**\n- `file` (file): Excel file with annual predictions data (required)\n- `reporting_year` (string): Year for all predictions (required)\n- `overwrite_existing` (boolean): Whether to overwrite existing predictions (default: false)\n\nüìä **Excel File Format:**\nRequired columns:\n- `company_symbol` (string): Stock symbol\n- `company_name` (string): Company name\n- `market_cap` (number): Market cap in millions\n- `sector` (string): Business sector\n- `reporting_quarter` (string): Optional quarter (Q1, Q2, Q3, Q4)\n- `long_term_debt_to_total_capital` (number): 0-100%\n- `total_debt_to_ebitda` (number): ‚â•0\n- `net_income_margin` (number): -100 to 100%\n- `ebit_to_interest_expense` (number): ‚â•0\n- `return_on_assets` (number): -100 to 100%\n\n‚úÖ **Success Response (202):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Annual bulk upload job started\",\n  \"job_id\": \"uuid\",\n  \"job_type\": \"annual_bulk_upload\",\n  \"estimated_processing_time\": \"5-10 minutes\",\n  \"rows_detected\": 150,\n  \"reporting_year\": \"2024\",\n  \"status_url\": \"/api/v1/predictions/jobs/{job_id}/status\",\n  \"result_url\": \"/api/v1/predictions/jobs/{job_id}/result\"\n}\n```\n\n‚ùå **Error Responses:**\n- 400: Invalid file format or missing required columns\n- 403: Insufficient permissions\n- 413: File too large (max 10MB)"
          }
        },
        {
          "name": "Quarterly Bulk Upload (Async)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 202) {",
                  "    const response = pm.response.json();",
                  "    if (response.job_id) {",
                  "        pm.collectionVariables.set('jobId', response.job_id);",
                  "        console.log('‚öôÔ∏è Quarterly Bulk Job ID set:', response.job_id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/quarterly_predictions.xlsx",
                  "description": "Excel file with quarterly predictions data"
                },
                {
                  "key": "reporting_year",
                  "value": "2024",
                  "type": "text",
                  "description": "Year for all predictions in the file"
                },
                {
                  "key": "reporting_quarter",
                  "value": "Q1",
                  "type": "text",
                  "description": "Quarter for all predictions (Q1, Q2, Q3, Q4)"
                },
                {
                  "key": "overwrite_existing",
                  "value": "false",
                  "type": "text",
                  "description": "Whether to overwrite existing predictions"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/quarterly/bulk-upload-async",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "quarterly",
                "bulk-upload-async"
              ]
            },
            "description": "**üì§ Quarterly Bulk Upload (Async)** - Upload Excel file for batch quarterly predictions processing\n\nüîí **Authorization:** org_admin or higher\n\nüìã **Form Data:**\n- `file` (file): Excel file with quarterly predictions data (required)\n- `reporting_year` (string): Year for all predictions (required)\n- `reporting_quarter` (string): Quarter for all predictions (Q1, Q2, Q3, Q4) (required)\n- `overwrite_existing` (boolean): Whether to overwrite existing predictions (default: false)\n\nüìä **Excel File Format:**\nRequired columns:\n- `company_symbol` (string): Stock symbol\n- `company_name` (string): Company name\n- `market_cap` (number): Market cap in millions\n- `sector` (string): Business sector\n- `total_debt_to_ebitda` (number): ‚â•0\n- `sga_margin` (number): -100 to 100%\n- `long_term_debt_to_total_capital` (number): 0-100%\n- `return_on_capital` (number): -100 to 100%\n\n‚úÖ **Success Response (202):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Quarterly bulk upload job started\",\n  \"job_id\": \"uuid\",\n  \"job_type\": \"quarterly_bulk_upload\",\n  \"estimated_processing_time\": \"3-7 minutes\",\n  \"rows_detected\": 100,\n  \"reporting_year\": \"2024\",\n  \"reporting_quarter\": \"Q1\",\n  \"status_url\": \"/api/v1/predictions/jobs/{job_id}/status\",\n  \"result_url\": \"/api/v1/predictions/jobs/{job_id}/result\"\n}\n```\n\n‚ùå **Error Responses:**\n- 400: Invalid file format or missing required columns\n- 403: Insufficient permissions\n- 413: File too large (max 10MB)"
          }
        },
        {
          "name": "Get Job Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/jobs/{{jobId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "jobs",
                "{{jobId}}",
                "status"
              ]
            },
            "description": "**üìä Get Job Status** - Check status of bulk upload job\n\nüîí **Authorization:** job owner or org_admin\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"job_id\": \"uuid\",\n  \"job_type\": \"annual_bulk_upload\",\n  \"status\": \"processing\",\n  \"progress\": {\n    \"total_rows\": 150,\n    \"processed_rows\": 75,\n    \"successful_rows\": 70,\n    \"failed_rows\": 5,\n    \"percentage_complete\": 50\n  },\n  \"created_at\": \"2024-01-01T00:00:00Z\",\n  \"started_at\": \"2024-01-01T00:01:00Z\",\n  \"estimated_completion\": \"2024-01-01T00:08:00Z\",\n  \"current_step\": \"Processing row 76\",\n  \"error_summary\": {\n    \"validation_errors\": 3,\n    \"processing_errors\": 2\n  }\n}\n```\n\nüìã **Status Values:**\n- `pending`: Job queued but not started\n- `processing`: Job currently running\n- `completed`: Job finished successfully\n- `failed`: Job failed with errors\n- `cancelled`: Job was cancelled\n\n‚ùå **Error Responses:**\n- 404: Job not found\n- 403: Access denied"
          }
        },
        {
          "name": "Get Job Results",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/predictions/jobs/{{jobId}}/result",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "predictions",
                "jobs",
                "{{jobId}}",
                "result"
              ]
            },
            "description": "**üìä Get Job Results** - Get detailed results of completed bulk upload job\n\nüîí **Authorization:** job owner or org_admin\n\n‚úÖ **Success Response (200) - For Completed Job:**\n```json\n{\n  \"job_id\": \"uuid\",\n  \"job_type\": \"annual_bulk_upload\",\n  \"status\": \"completed\",\n  \"summary\": {\n    \"total_rows_processed\": 150,\n    \"successful_predictions\": 145,\n    \"failed_predictions\": 5,\n    \"companies_created\": 25,\n    \"companies_updated\": 120,\n    \"processing_time\": \"00:06:23\"\n  },\n  \"successful_predictions\": [\n    {\n      \"row_number\": 1,\n      \"company_symbol\": \"RELIANCE\",\n      \"prediction_id\": \"uuid\",\n      \"default_probability\": 0.125,\n      \"risk_category\": \"Low\"\n    }\n  ],\n  \"failed_predictions\": [\n    {\n      \"row_number\": 15,\n      \"company_symbol\": \"INVALID\",\n      \"error_type\": \"validation_error\",\n      \"error_message\": \"Invalid market cap value\",\n      \"raw_data\": {\n        \"company_symbol\": \"INVALID\",\n        \"market_cap\": \"not-a-number\"\n      }\n    }\n  ],\n  \"download_urls\": {\n    \"success_report\": \"/api/v1/predictions/jobs/{job_id}/download/success\",\n    \"error_report\": \"/api/v1/predictions/jobs/{job_id}/download/errors\",\n    \"full_results\": \"/api/v1/predictions/jobs/{job_id}/download/full\"\n  },\n  \"completed_at\": \"2024-01-01T00:06:23Z\"\n}\n```\n\n‚ùå **Error Responses:**\n- 404: Job not found\n- 403: Access denied\n- 409: Job not completed yet (check status first)"
          }
        }
      ]
    }
  ]
}
