{
  "info": {
    "name": "üè¶ ULTRA COMPLETE Financial Risk API - ALL 71+ Endpoints",
    "description": "Production-ready comprehensive collection with ALL endpoints: 5 auth + 5 admin auth + 5 tenant management + 9 tenant ops + 14 organization management + 11 user management + 4 company management + 13 prediction endpoints. Perfect for HDFC Bank and enterprise use with detailed docs and auto-variable management.",
    "version": "6.0.0 - PRODUCTION COMPLETE",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000",
      "type": "string",
      "description": "üåê Base URL for the API server"
    },
    {
      "key": "token",
      "value": "",
      "type": "string",
      "description": "üîë JWT access token for authentication"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string",
      "description": "üë§ Current user ID"
    },
    {
      "key": "organizationId",
      "value": "",
      "type": "string",
      "description": "üè¢ Current organization ID"
    },
    {
      "key": "tenantId",
      "value": "",
      "type": "string",
      "description": "üè¶ Current tenant ID"
    },
    {
      "key": "companyId",
      "value": "",
      "type": "string",
      "description": "üè≠ Current company ID"
    },
    {
      "key": "predictionId",
      "value": "",
      "type": "string",
      "description": "üìä Current prediction ID"
    },
    {
      "key": "jobId",
      "value": "",
      "type": "string",
      "description": "‚öôÔ∏è Current background job ID"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "üîê User Authentication (5 endpoints)",
      "description": "Core authentication system: register, login, join organization, refresh token, logout",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.user && response.user.id) {",
                  "        pm.collectionVariables.set('userId', response.user.id);",
                  "        console.log('‚úÖ User ID set:', response.user.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"admin@hdfcbank.com\",\n    \"password\": \"SecurePass@2024\",\n    \"full_name\": \"HDFC Bank Admin\",\n    \"role\": \"super_admin\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "**Register a new user account**\n\nüìã **Request Body:**\n```json\n{\n  \"email\": \"string\",         // Valid email (required)\n  \"password\": \"string\",      // Min 8 chars (required)\n  \"full_name\": \"string\",     // User's full name (required)\n  \"role\": \"user|org_member|org_admin|tenant_admin|super_admin\", // Default: user\n  \"join_token\": \"string\"     // Optional: for joining organization\n}\n```\n\n‚úÖ **Success Response (201):**\n```json\n{\n  \"success\": true,\n  \"message\": \"User registered successfully\",\n  \"user\": {\n    \"id\": \"uuid\",\n    \"email\": \"admin@hdfcbank.com\",\n    \"full_name\": \"HDFC Bank Admin\",\n    \"role\": \"super_admin\",\n    \"is_active\": true,\n    \"created_at\": \"2024-01-01T00:00:00Z\"\n  }\n}\n```"
          }
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.access_token) {",
                  "        pm.collectionVariables.set('token', response.access_token);",
                  "        console.log('üîë Token set successfully');",
                  "    }",
                  "    if (response.user) {",
                  "        if (response.user.id) pm.collectionVariables.set('userId', response.user.id);",
                  "        if (response.user.organization_id) pm.collectionVariables.set('organizationId', response.user.organization_id);",
                  "        if (response.user.tenant_id) pm.collectionVariables.set('tenantId', response.user.tenant_id);",
                  "        console.log('üë§ User context set');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"admin@hdfcbank.com\",\n    \"password\": \"SecurePass@2024\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "**Authenticate user and receive access token**\n\nüìã **Request Body:**\n```json\n{\n  \"email\": \"string\",        // User email (required)\n  \"password\": \"string\"      // User password (required)\n}\n```\n\n‚úÖ **Success Response (200):**\n```json\n{\n  \"access_token\": \"jwt_token_here\",\n  \"token_type\": \"bearer\",\n  \"expires_in\": 3600,\n  \"user\": {\n    \"id\": \"uuid\",\n    \"email\": \"admin@hdfcbank.com\",\n    \"full_name\": \"HDFC Bank Admin\",\n    \"role\": \"super_admin\",\n    \"organization_id\": \"uuid\",\n    \"tenant_id\": \"uuid\"\n  }\n}\n```"
          }
        },
        {
          "name": "Join Organization",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"join_token\": \"HDFC-2024-MAIN001\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/join",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "join"]
            },
            "description": "**Join organization using join token** (Requires authentication)"
          }
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refresh_token\": \"your_refresh_token_here\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "refresh"]
            },
            "description": "**Refresh access token using refresh token**"
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "auth", "logout"]
            },
            "description": "**Logout user and invalidate token** (Requires authentication)"
          }
        }
      ]
    },
    {
      "name": "üîß Admin Authentication (5 endpoints)",
      "description": "Super admin and tenant admin endpoints: create users, impersonate, force password reset, audit, bulk operations",
      "item": [
        {
          "name": "Create User (Admin)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"newuser@hdfcbank.com\",\n    \"password\": \"NewUserPass@2024\",\n    \"full_name\": \"New HDFC User\",\n    \"global_role\": \"user\",\n    \"organization_id\": \"{{organizationId}}\",\n    \"tenant_id\": \"{{tenantId}}\",\n    \"is_active\": true\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/auth/create-user",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "auth", "create-user"]
            },
            "description": "**Create user account (Admin only)** - Requires admin role"
          }
        },
        {
          "name": "Impersonate User",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/auth/impersonate/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "auth", "impersonate", "{{userId}}"]
            },
            "description": "**Impersonate another user** - Requires super_admin role"
          }
        },
        {
          "name": "Force Password Reset",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"new_password\": \"NewSecurePassword@2024\",\n    \"notify_user\": true\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/auth/force-password-reset/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "auth", "force-password-reset", "{{userId}}"]
            },
            "description": "**Force password reset for any user** - Requires admin role"
          }
        },
        {
          "name": "Get User Login History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/auth/audit/login-history/{{userId}}?limit=50&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "auth", "audit", "login-history", "{{userId}}"],
              "query": [
                {"key": "limit", "value": "50"},
                {"key": "offset", "value": "0"}
              ]
            },
            "description": "**Get login history for specific user** - Requires admin role"
          }
        },
        {
          "name": "Bulk Activate Users",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_ids\": [\"{{userId}}\", \"user-id-2\", \"user-id-3\"],\n    \"activate\": true,\n    \"send_notification\": true\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/auth/bulk-activate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "auth", "bulk-activate"]
            },
            "description": "**Activate or deactivate multiple users** - Requires admin role"
          }
        }
      ]
    },
    {
      "name": "üë• Tenant Admin Management (5 endpoints)",
      "description": "Super admin endpoints: create tenant with admin, assign existing user, get tenant info, remove admin, assign to org",
      "item": [
        {
          "name": "Create Tenant with Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.tenant_id) pm.collectionVariables.set('tenantId', response.tenant_id);",
                  "    if (response.admin_user_id) pm.collectionVariables.set('userId', response.admin_user_id);",
                  "    if (response.default_org_id) pm.collectionVariables.set('organizationId', response.default_org_id);",
                  "    console.log('üè¶ Tenant created with admin');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"tenant_name\": \"HDFC Bank\",\n    \"tenant_description\": \"HDFC Bank - Financial Risk Assessment\",\n    \"tenant_domain\": \"hdfcbank.com\",\n    \"admin_email\": \"admin@hdfcbank.com\",\n    \"admin_password\": \"HDFCAdmin@2024\",\n    \"admin_first_name\": \"HDFC\",\n    \"admin_last_name\": \"Administrator\",\n    \"create_default_org\": true,\n    \"default_org_name\": \"HDFC Main Organization\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/tenant-management/create-tenant-with-admin",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "tenant-management", "create-tenant-with-admin"]
            },
            "description": "**Create tenant and assign admin in one atomic operation** - Requires super_admin"
          }
        },
        {
          "name": "Assign Existing User as Tenant Admin",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_email\": \"existing.user@hdfcbank.com\",\n    \"tenant_id\": \"{{tenantId}}\",\n    \"create_default_org\": false\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/tenant-management/assign-existing-user",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "tenant-management", "assign-existing-user"]
            },
            "description": "**Assign existing user as tenant admin** - Requires super_admin"
          }
        },
        {
          "name": "Get Tenant Admin Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/tenant-management/tenant/{{tenantId}}/admin-info",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "tenant-management", "tenant", "{{tenantId}}", "admin-info"]
            },
            "description": "**Get detailed tenant and admin information** - Requires super_admin"
          }
        },
        {
          "name": "Remove Tenant Admin",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/tenant-management/remove-tenant-admin/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "tenant-management", "remove-tenant-admin", "{{userId}}"]
            },
            "description": "**Remove tenant admin role from user** - Requires super_admin"
          }
        },
        {
          "name": "Assign User to Organization",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_email\": \"user@hdfcbank.com\",\n    \"organization_id\": \"{{organizationId}}\",\n    \"organization_role\": \"member\",\n    \"bypass_join_token\": true\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/admin/tenant-management/assign-user-to-organization",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "admin", "tenant-management", "assign-user-to-organization"]
            },
            "description": "**Directly assign user to organization** - Requires super_admin"
          }
        }
      ]
    }
  ]
}
